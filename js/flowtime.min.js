/*!
 * Brav1Toolbox.js - common utility scripts and polyfills
 * http://marcolago.com/
 * MIT licensed
 *
 * Copyright (C) 2012-now Marco Lago, http://marcolago.com
 */
var Brav1Toolbox=function(){function a(){return window.getComputedStyle?window.getComputedStyle(document.body):document.documentElement.style}function b(a,b,c,d){a.addEventListener?a.addEventListener(b,c,d):a.attachEvent&&a.attachEvent("on"+b,c)}function c(a,b,c){a.removeEventListener?a.removeEventListener(b,c):a.detachEvent&&a.detachEvent("on"+b,c)}function d(a){return""!=e(a)}function e(b){for(var c=n||a(),d=0;d<m.length;d++){var e=m[d].replace(/-/g,""),f=b;if(e.length>0&&(f=f.charAt(0).toUpperCase()+f.substr(1)),f=e+f,f in c==1)return f}return""}function f(a,b){var c=e(b);return window.getComputedStyle?window.getComputedStyle(a)[c]:a.style[c]}function g(a){return!!a&&Object.prototype.toString.call(a).match(/(\w+)\]/)[1]}function h(a,b){if(a.classList)a.classList.add(b);else if(0==j(a,b)){var c=a.className;c.length>0&&(c+=" "),a.className=c+b}}function i(a,b){if(a.classList)a.classList.remove(b);else{var c=a.className;-1!=c.indexOf(b)&&(c=-1!=c.indexOf(" "+b)?c.replace(" "+b,""):-1!=c.indexOf(b+" ")?c.replace(b+" ",""):c.replace(b,"")),a.className=c}}function j(a,b){if(a){if(a.classList)return a.classList.contains(b);if(a.className)return-1!=a.className.indexOf(b)}return!1}function k(a,b){if(document.createEvent){var c=document.createEvent("HTMLEvents");c.initEvent(a,!0,!0);for(var d in b)c[d]=b[d];document.dispatchEvent(c)}}function l(a,b){var c,d;return c=b.x-a.x,c*=c,d=b.y-a.y,d*=d,Math.abs(Math.sqrt(c+d))}var m=["","-webkit-","-moz-","-ms-","-o-"],n=a();return{addListener:b,removeListener:c,dispatchEvent:k,testCSS:d,getPrefixed:e,getCSSValue:f,typeOf:g,addClass:h,removeClass:i,hasClass:j,distance:l}}();!function(a,b){function c(b,c,g,h){b[d](f+c,"wheel"==e?g:function(b){!b&&(b=a.event);var c={originalEvent:b,target:b.target||b.srcElement,type:"wheel",deltaMode:"MozMousePixelScroll"==b.type?0:1,deltaX:0,deltaZ:0,preventDefault:function(){b.preventDefault?b.preventDefault():b.returnValue=!1}};return"mousewheel"==e?(c.deltaY=-1/40*b.wheelDelta,b.wheelDeltaX&&(c.deltaX=-1/40*b.wheelDeltaX)):c.deltaY=b.detail,g(c)},h||!1)}var d,e,f="";a.addEventListener?d="addEventListener":(d="attachEvent",f="on"),e="onwheel"in b.createElement("div")?"wheel":void 0!==b.onmousewheel?"mousewheel":"DOMMouseScroll",a.addWheelListener=function(a,b,d){c(a,e,b,d),"DOMMouseScroll"==e&&c(a,"MozMousePixelScroll",b,d)}}(window,document);/*!
 * Flowtime.js
 * http://marcolago.com/flowtime-js/
 * MIT licensed
 *
 * Copyright (C) 2012-now Marco Lago, http://marcolago.com
 */
var Flowtime=function(){function a(a){if(Ab){if("A"===a.target.nodeName||"A"===a.target.parentNode.nodeName){var b=a.target.getAttribute("href")||a.target.parentNode.getAttribute("href");if("#"===b)return void a.preventDefault();if(b&&(a.target.blur(),"#"==b.substr(0,1))){a.preventDefault();var c=bc.setPage(b);v(c,!0,!0)}}if(ib){for(var c=a.target;c&&!Brav1Toolbox.hasClass(c,Ma);)c=c.parentNode;Brav1Toolbox.hasClass(c,Ma)&&(a.preventDefault(),v(c,null,!0))}if(Brav1Toolbox.hasClass(a.target,Va)){a.preventDefault();var d=Number(u(a.target.getAttribute("data-section"))),e=Number(u(a.target.getAttribute("data-page")));X(d,e)}}}function b(a){bb=!1;var b;b=a.state?a.state.token.replace("#/",""):document.location.hash.replace("#/","");var c=bc.setPage(b);v(c,!1)}function c(a,b){if(bb||b){var c=document.location.hash.replace("#/",""),d=bc.setPage(c);v(d,!1)}}function d(a){vb=a,vb?(Brav1Toolbox.addListener($a,"mousedown",e,!1),Brav1Toolbox.addListener($a,"mouseup",g,!1)):(Brav1Toolbox.removeListener($a,"mousedown",e),Brav1Toolbox.removeListener($a,"mouseup",g))}function e(a){gc=0,hc=0,a=h(a),ec=a.clientX,fc=a.clientY,ic=1;var b=i();cc=b.x,dc=b.y,vb&&Brav1Toolbox.addListener($a,"mousemove",f,!1)}function f(a){a.preventDefault(),a=h(a),gc=a.clientX-ec,hc=a.clientY-fc}function g(a){if(zb&&(Math.abs(gc)>=kc||Math.abs(hc)>=kc))if(a=h(a),ic=0,jc=Math.abs(gc)>=Math.abs(hc)?"x":"y","x"==jc&&Math.abs(gc)>=kc){if(gc>0)return void(Ib===!0?W():U(void 0,!1));if(0>gc)return void(Ib===!0?V():T(void 0,!1))}else{if(hc>0&&Math.abs(hc)>=kc)return void(Ib===!0?U(void 0,!1):W());if(0>hc)return void(Ib===!0?T(void 0,!1):V())}Brav1Toolbox.removeListener($a,"mousemove",f)}function h(a){return a.touches&&(a=a.touches[0]),a}function i(){var a=$a.style[Kb],b=a.indexOf("translateX(")+11,c=a.substring(b,a.indexOf(")",b));-1!=c.indexOf("%")?(c=c.replace("%",""),c=parseInt(c)/100*window.innerWidth):-1!=c.indexOf("px")&&(c=parseInt(c.replace("px","")));var d=a.indexOf("translateY(")+11,e=a.substring(d,a.indexOf(")",d));return-1!=e.indexOf("%")?(e=e.replace("%",""),e=parseInt(e)/100*window.innerHeight):-1!=e.indexOf("px")&&(e=parseInt(e.replace("px",""))),{x:c,y:e}}function j(a){a.preventDefault(),z()}function k(a){var b=a.target;xb=l(b);var c=xb===!0?!1:wb;Bb===!1&&c===!0&&o(a)}function l(a){for(var b=!1,c=a;c.className&&c.className.indexOf("ft-page")<0;)c.scrollHeight>c.clientHeight-1&&(b=!0),c=c.parentNode;return-1!=c.className.indexOf("ft-page")&&c.scrollHeight>c.clientHeight-1&&(b=!0),b===!0&&((c.scrollHeight-c.scrollTop===c.clientHeight||0===c.scrollTop&&c.alreadyScrolled&&c.alreadyScrolled===!0)&&(b=!1),c.alreadyScrolled=!0),b}function m(){clearTimeout(Cb),Bb=!1}function n(){Cb=setTimeout(m,Db)}function o(a){Bb=!0,n(),0==a.deltaY?a.deltaX>0?Ib===!0?V():T(void 0,a.shiftKey):a.deltaX<0&&(Ib===!0?W():U(void 0,a.shiftKey)):a.deltaY>0?Ib===!0?T(void 0,a.shiftKey):V():a.deltaY<0&&(Ib===!0?U(void 0,a.shiftKey):W())}function p(a){if(a.length>0){var b=a.replace("#/","").split("/");if(b.length>0){var c=document.querySelectorAll(La+"[data-prog=__"+b[0]+"]"),d=document.querySelectorAll(La+"[data-id=__"+b[0]+"]"),e=c.length>0?c:d;if(null!=e){for(var f=0;f<e.length;f++){var g=e[f],h=null;if(b.length>1&&(h=g.querySelector(Na+"[data-prog=__"+b[1]+"]")||g.querySelector(Na+"[data-id=__"+b[1]+"]")),null!==h)break}null==h&&g&&(h=g.querySelector(Na))}return h}}}function q(a){Eb=a===!1?!1:!0;var b=bc.getCurrentPage();bc.update(),v(b,!1,!1,!1),pb===!0&&A()}function r(a){var b=eb,c=bc.getCurrentPage().getAttribute("data-title");if(null==c)for(var d=a.split("/"),e=0;e<d.length;e++)b+=" | "+d[e];else null!=bc.getCurrentSection().getAttribute("data-title")&&(b+=" | "+bc.getCurrentSection().getAttribute("data-title")),b+=" | "+c;document.title=b}function s(a){var b=a.getAttribute("data-id"),c=a.getAttribute("data-prog"),d="";return null!=b?d=b.replace(/__/,""):null!=c&&(d=c.replace(/__/,"")),d}function t(a){return"__"!=a.substr(0,2)?"__"+a:a}function u(a){return"__"==a.substr(0,2)?a.replace(/__/,""):a}function v(a,b,c,d){b=0==b?b:!0,a||(a=null!=bc.getCurrentPage()?bc.getCurrentPage():document.querySelector(Na),b=!0),d===!1?R():Gb===!0&&S(),x(a),Gb===!0&&S(!0),y(a),ib&&E(!1,!1);var e=bc.getHash(a);c===!0&&bc.updateFragments();var f=bc.getPageIndex(a);if(db.section!=f.section||db.page!=f.page)if(null!=Ja&&0!=b&&-1==bc.getCurrentFragmentIndex()){var g={token:e},h="#/"+e;cb=h;try{window.history.pushState(g,null,cb)}catch(i){Zb===!0&&console.log(i)}}else document.location.hash="/"+e;r(e),Xb[f.section]=f.page,db.section===f.section&&db.page!==f.page&&(Yb=f.page),w(),db=f,bc.switchActivePage(a,!0),pb&&C()}function w(){if(Eb!==!1){var a=bc.getPageIndex(),b={section:bc.getCurrentSection(),page:bc.getCurrentPage(),sectionIndex:a.section,pageIndex:a.page,pastSectionIndex:db.section,pastPageIndex:db.page,prevSection:bc.hasPrevSection(),nextSection:bc.hasNextSection(),prevPage:bc.hasPrevPage(),nextPage:bc.hasNextPage(),fragment:bc.getCurrentFragment(),fragmentIndex:bc.getCurrentFragmentIndex(),isOverview:ib,progress:bc.getProgress(),total:bc.getPagesTotalLength(),isLoopable:ob,clickerMode:qb,isAutoplay:lc};Brav1Toolbox.dispatchEvent(Za,b),void 0!==Jb&&Jb(b)}else Eb=!0}function x(a){var b,c,d=bc.getPageIndex(a);if(mb===!0?(b=a.x,c=a.y):Ib===!0?(c=d.section,b=d.page):(b=d.section,c=d.page),Wb===!0){var e=a.parentNode,f=$a,g=e;Ib===!0&&(f=e,g=$a),Lb?(f.style[Kb]=mb?"translateX("+-b+"px)":"translateX("+100*-b+"%)",g.style[Kb]=mb?"translateY("+-c+"px)":"translateY("+100*-c+"%)"):(f.style.left=mb?b+"px":100*-b+"%",g.style.top=mb?c+"px":100*-c+"%")}else Lb?$a.style[Kb]=mb?"translateX("+-b+"px) translateY("+-c+"px)":"translateX("+100*-b+"%) translateY("+100*-c+"%)":mb?($a.style.top=-c+"px",$a.style.left=-b+"px"):($a.style.top=100*-c+"%",$a.style.left=100*-b+"%");z()}function y(a){if(ub)for(var b=bc.getPageIndex(a),c=bc.getParallaxElements(),d=0;d<c.length;d++){var e=c[d];if(void 0!=e)for(var f=0;f<e.length;f++){var g=e[f];if(void 0!=g)for(var h=0;h<g.length;h++){var i=g[h],j=0,k=0;b.section<d?j=i.pX:b.section>d&&(j=-i.pX),b.page<f?k=i.pY:b.page>f&&(k=-i.pY);var l="%";rb&&(l="px"),i.style[Kb]=Ib===!0?"translateX("+k+l+") translateY("+j+l+")":"translateX("+j+l+") translateY("+k+l+")"}}}}function z(){window.scrollTo(0,0)}function A(){gb&&gb.parentNode.removeChild(gb);var a=document.createDocumentFragment();gb=document.createElement("div"),gb.className=Ta+(Ib===!0?" ft-cross":""),a.appendChild(gb);for(var b=0;b<bc.getSectionsLength();b++){var c=document.createElement("div");c.setAttribute("data-section","__"+b),c.className=Ua,Brav1Toolbox.addClass(c,"thumb-section-"+b);for(var d=bc.getPages(b),e=0;e<d.length;e++){var f=document.createElement("div");f.className=Va,f.setAttribute("data-section","__"+b),f.setAttribute("data-page","__"+e),Brav1Toolbox.addClass(f,"thumb-page-"+e),c.appendChild(f)}gb.appendChild(c)}ab.appendChild(gb),C()}function B(){null!=gb&&(ab.removeChild(gb),gb=null)}function C(){if(null!=gb)for(var a=gb.querySelectorAll(Wa),b=0;b<a.length;b++){var c=a[b],d=Number(u(c.getAttribute("data-section"))),e=Number(u(c.getAttribute("data-page")));d==bc.getPageIndex().section&&e==bc.getPageIndex().page?Brav1Toolbox.addClass(a[b],"actual"):Brav1Toolbox.removeClass(a[b],"actual")}}function D(){return gb}function E(a,b){ib?G(a,b):(Ia=bc.getCurrentPage(),H())}function F(a,b,c){ib!==a&&(ib=!a,E(b,c))}function G(a,b){ib=!1,Brav1Toolbox.removeClass(ab,"ft-overview"),bc.hideFragments(),b=b===!1?!1:!0,1==b&&(1==a?v(Ia):v())}function H(){ib=!0,Brav1Toolbox.addClass(ab,"ft-overview"),bc.showFragments(),0==jb?I(!0):J(!0),w()}function I(a){if(a){if(Ib===!0)var b=100/bc.getSectionsLength(),c=100/bc.getPagesLength();else var c=100/bc.getSectionsLength(),b=100/bc.getPagesLength();var d=.9*Math.min(c,b),e=(100-bc.getSectionsLength()*d)/2,f=(100-bc.getPagesLength()*d)/2;$a.style[Kb]="translate("+e+"%, "+f+"%) scale("+d/100+", "+d/100+")"}}function J(a){if(a){var b=fb,c=bc.getPageIndex();if(Ib===!0)var d=50-b*c.section-b/2,e=50-b*c.page-b/2;else var e=50-b*c.section-b/2,d=50-b*c.page-b/2;$a.style[Kb]="translate("+e+"%, "+d+"%) scale("+b/100+", "+b/100+")"}}function K(a){var b=a.target.tagName;"INPUT"!=b&&"TEXTAREA"!=b&&"SELECT"!=b&&a.keyCode>=37&&a.keyCode<=40&&a.preventDefault()}function L(a){if(yb){var b=a.target.tagName;if("INPUT"!==b&&"TEXTAREA"!==b&&"SELECT"!==b)switch(a.preventDefault(),a.keyCode){case 27:E(!0);break;case 33:qb?W(a.shiftKey):$();break;case 34:qb?V(a.shiftKey):_();break;case 35:Z();break;case 36:Y();break;case 37:Ib===!0?W(a.shiftKey):U(null,a.shiftKey);break;case 39:Ib===!0?V(a.shiftKey):T(null,a.shiftKey);break;case 38:Ib===!0?U(null,a.shiftKey):W(a.shiftKey);break;case 40:Ib===!0?T(null,a.shiftKey):V(a.shiftKey);break;case 13:ib&&X(bc.getCurrentHilited())}}}function M(a,b,c,d){nc=isNaN(parseInt(b))?nc:b,oc=d===!0||!1,1==a&&c!==!1&&N()}function N(){lc=!0,clearTimeout(mc),pc=Date.now(),mc=setTimeout(function(){V(oc),N()},nc-qc),qc=0}function O(){lc=!1,qc=Date.now()-pc,clearTimeout(mc)}function P(){lc=!1,clearTimeout(mc),pc=0,qc=0}function Q(){pb&&null==gb&&A(),document.location.hash.length>0?(R(!0),c(null,!0)):Q.arguments.length>0?X.apply(this,Q.arguments):(X(0,0),C())}function R(a){Gb=!0,$a.style[Brav1Toolbox.getPrefixed("transition-duration")]="0ms",a===!0&&setTimeout(S,Hb)}function S(a){Gb=!1,a===!0?setTimeout(function(){$a.style[Brav1Toolbox.getPrefixed("transition-duration")]=""+Hb/1e3+"s"},Hb):$a.style[Brav1Toolbox.getPrefixed("transition-duration")]=""+Hb/1e3+"s"}function T(a,b){a=void 0!=a?a:Rb,b===!0&&(a=!Rb);var c=bc.getNextSection(a,kb);void 0!=c?v(c):ib&&jb&&H()}function U(a,b){a=void 0!=a?a:Rb,b===!0&&(a=!Rb);var c=bc.getPrevSection(a,kb);void 0!=c?v(c):ib&&jb&&H()}function V(a){var b=bc.getNextPage(a);b!==!1&&(void 0!=b?v(b):ib&&jb&&H())}function W(a){var b=bc.getPrevPage(a);b!==!1&&(void 0!=b?v(b):ib&&jb&&H())}function X(){var a=X.arguments;if(a.length>0){if(1==a.length)if("Object"===Brav1Toolbox.typeOf(a[0])){var b=a[0],c=b.section,d=b.page;if(null!=c&&void 0!=c){var e=document.querySelector(La+"[data-id="+t(c)+"]");if(null!=d&&void 0!=d){var f=e.querySelector(Na+"[data-id="+t(d)+"]");if(null!=f)return void v(f)}}}else void 0!=a[0].nodeName&&v(a[0],null,!0);if("Number"===Brav1Toolbox.typeOf(a[0])||0===a[0]){var f=bc.getPageByIndex(a[1],a[0]);return void v(f)}}}function Y(){X(0,0)}function Z(){var a=bc.getSectionsLength()-1;X(a,bc.getPages(a).length-1)}function $(){var a=bc.getPageIndex();X(a.section,0)}function _(){var a=bc.getPageIndex();X(a.section,bc.getPages(a.section).length-1)}function aa(a,b,c){Brav1Toolbox.addListener(document,a,b,c)}function ba(a){kb=a===!0?!0:!1,ca(a)}function ca(a){lb=a===!0?!0:!1}function da(a){Ja=a===!0?!0:!1}function ea(a){mb=a===!0?!0:!1,mb===!0&&bc.updateOffsets(),v()}function fa(a){Sb=a===!0?!0:!1}function ga(a){Tb=a===!0?!0:!1}function ha(a){Rb=a===!0?!1:!0}function ia(a){jb=a===!0?!0:!1}function ja(a){nb=a===!0?!0:!1}function ka(a){pb=a===!0?!0:!1,pb?(null==gb&&A(),C()):null!=gb&&B()}function la(a,b){sb=a,tb=void 0==b?sb:b,bc.update()}function ma(a){rb=a===!0?!0:!1}function na(){return bc.getPageIndex().section}function oa(){return bc.getPageIndex().page}function pa(a){ob=a===!0?!0:!1}function qa(a){qb=a===!0?!0:!1}function ra(a,b,c,d){Ab=a===!1?!1:!0,yb=b===!1?!1:!0,wb=c===!1?!1:!0,zb=d===!1?!1:!0}function sa(a,b,c,d){Ab=a===!1?!0:!1,yb=b===!1?!0:!1,wb=c===!1?!0:!1,zb=d===!1?!0:!1}function ta(a){Ab=a===!1?!1:!0}function ua(a){yb=a===!1?!1:!0}function va(a){wb=a===!1?!1:!0}function wa(a){zb=a===!1?!1:!0}function xa(a){Ib!==a&&(Ib=a===!0?!0:!1,Brav1Toolbox.hasClass($a,Xa)||Ib!==!0?Brav1Toolbox.hasClass($a,Xa)&&Ib!==!0&&Brav1Toolbox.removeClass($a,Xa):Brav1Toolbox.addClass($a,Xa),gb&&(Brav1Toolbox.hasClass(gb,Xa)||Ib!==!0?Brav1Toolbox.hasClass(gb,Xa)&&Ib!==!0&&Brav1Toolbox.removeClass(gb,Xa):Brav1Toolbox.addClass(gb,Xa)),bc.updateOffsets(),v())}function ya(a){Wb!==a&&(Wb=a===!0?!0:!1,Brav1Toolbox.hasClass($a,Ya)||Wb!==!0?Brav1Toolbox.hasClass($a,Ya)&&Wb!==!0&&Brav1Toolbox.removeClass($a,Ya):Brav1Toolbox.addClass($a,Ya),bc.updateOffsets(),v())}function za(a){Fb=a}function Aa(a){Hb=a,$a.style[Brav1Toolbox.getPrefixed("transition-duration")]=""+Hb+"ms"}function Ba(){return Hb}function Ca(a){Db=a}function Da(a){Jb=a}function Ea(a){Ub=a===!0?!0:!1}function Fa(a){Vb=a===!0?!0:!1}function Ga(a){Mb=a===!1?!1:!0}var Ha=!1;("ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0)&&(Ha=!0);var Ia,Ja=window.history.pushState,Ka="ft-section",La="."+Ka,Ma="ft-page",Na="."+Ma,Oa="ft-fragment",Pa="."+Oa,Qa="revealed",Ra="actual",Sa="revealed-temp",Ta="ft-default-progress",Ua="ft-section-thumb",Va="ft-page-thumb",Wa="."+Va,Xa="ft-cross",Ya="ft-scroll-the-section",Za="flowtimenavigation",$a=document.querySelector(".flowtime"),_a=$a.parentNode,ab=(document.querySelector("html"),document.querySelector("body")),bb=!1,cb="",db={section:0,page:0},eb=document.title,fb=22,gb=null,hb=0,ib=!1,jb=!1,kb=!1,lb=!0,mb=!1,nb=!1,ob=!1,pb=!1,qb=!1,rb=!1,sb=50,tb=50,ub=null!=document.querySelector(".parallax"),vb=!1,wb=!0,xb=!0,yb=!0,zb=!0,Ab=!0,Bb=!1,Cb=0,Db=2e3,Eb=!0,Fb=1e3,Gb=!1,Hb=500,Ib=Brav1Toolbox.hasClass($a,Xa),Jb=void 0,Kb=Brav1Toolbox.getPrefixed("transform"),Lb=Brav1Toolbox.testCSS("transform"),Mb=!0,Nb=0,Ob=0,Pb=0,Qb=0,Rb=!1,Sb=!1,Tb=!1,Ub=!1,Vb=!1,Wb=Brav1Toolbox.hasClass($a,Ya),Xb=[],Yb=0,Zb=!1;!function(){var a=Brav1Toolbox.getCSSValue($a,"transitionDuration"),b=parseFloat(a),c=a.replace(""+b,"");!isNaN(b)&&b>0&&("s"===c?Hb=1e3*b:"ms"===c&&(Hb=b)),Aa(Hb),Db=4*Hb}();var $b=!0;try{var _b=document.querySelector("html").className.toLowerCase();(-1!=_b.indexOf("ie7")||-1!=_b.indexOf("ie8")||-1!=_b.indexOf("lt-ie9"))&&($b=!1)}catch(ac){$b=!1}$b&&Brav1Toolbox.addClass(_a,"ft-absolute-nav"),window.onload=function(){bc.updateOffsets()};var bc=function(){function a(){$=[],ea=[],aa=document.querySelectorAll(Pa),ba=[],Z=$a.querySelectorAll(".flowtime > "+La),_=$a.querySelectorAll(".flowtime "+Na);for(var a=0;a<Z.length;a++){var c=[],e=Z[a];ba[a]=[],da[a]=[],hb+=1,e.getAttribute("data-id")?e.setAttribute("data-id","__"+u(e.getAttribute("data-id"))):e.setAttribute("data-id","__"+hb),e.getAttribute("data-prog")?e.setAttribute("data-prog","__"+u(e.getAttribute("data-prog"))):e.setAttribute("data-prog","__"+hb),e.index=a,e.setAttribute("id",""),pages=e.querySelectorAll(Na),ha+=pages.length,ga=Math.max(ga,pages.length);for(var f=0;f<pages.length;f++){var g=pages[f];if(g.getAttribute("data-id")?g.setAttribute("data-id","__"+u(g.getAttribute("data-id"))):g.setAttribute("data-id","__"+(f+1)),g.getAttribute("data-prog")?g.setAttribute("data-prog","__"+u(g.getAttribute("data-prog"))):g.setAttribute("data-prog","__"+(f+1)),g.index=f,g.setAttribute("id",""),!g.getAttribute("data-title")){var h=g.querySelector("h1");null!=h&&""!=h.textContent.lenght&&g.setAttribute("data-title",h.textContent)}b(g,a,f),c.push(g);var i=g.querySelectorAll(Pa);ba[a][f]=i,da[a][f]=-1}$.push(c)}fa=Z.length,z(),d()}function b(a,b,c){if(ub){void 0==ea[b]&&(ea[b]=[]),void 0==ea[b][c]&&(ea[b][c]=[]);var d=a.querySelectorAll(".parallax");if(d.length>0)for(var e=0;e<d.length;e++){var f=d[e],g=sb,h=tb;if(null!=f.getAttribute("data-parallax")){var i=f.getAttribute("data-parallax").split(",");g=h=i[0],i.length>1&&(h=i[1])}f.pX=g,f.pY=h,ea[b][c].push(f)}}}function c(){return ea}function d(){Nb=$a.offsetLeft,Ob=$a.offsetTop;for(var a=0;a<_.length;a++){var b=_[a],c=b.offsetParent;0===a&&(Pb=b.offsetLeft-Nb,Qb=b.offsetTop-Ob),Ib===!0?(b.x=b.offsetLeft-(Nb+Pb),b.y=c.offsetTop):(b.x=c.offsetLeft,b.y=b.offsetTop-(Ob+Qb))}}function e(a,b){var c=ja,d=ib===!0?!1:a;if(!(b===!0&&ba[ia][ja].length>0&&da[ia][ja]<ba[ia][ja].length-1&&d!==!0&&io===!1)){c=0,d===!0&&ia+1<=$.length-1?c=0:(d!==!0||lb===!0||ia+1>$.length-1)&&(c=ja);var e=Math.min(ia+1,$.length-1);return ia=1==ob&&e===ia?0:e,ib||(Ub===!0&&void 0!==Xb[ia]&&(c=Xb[ia]),Vb===!0&&(c=Yb)),g($[ia],c)}return k(ia,ja),j($[ia][ja])}function f(a,b){var c=ja,d=ib===!0?!1:a;if(!(b===!0&&ba[ia][ja].length>0&&da[ia][ja]>=0&&d!==!0&&ib===!1)){var c=0;c=0,d===!0&&ia-1>=0?c=0:(d!==!0||lb===!0||0>ia-1)&&(c=ja);var e=Math.max(ia-1,0);return ia=ob===!0&&e===ia?$.length-1:e,ib||(Ub===!0&&Xb[ia]>=0&&(c=Xb[ia]),Vb===!0&&(c=Yb)),g($[ia],c)}return l(ia,ja),j($[ia][ja])}function g(a,b){var c=a[b];if(void 0===c)if(Tb===!0)c=a[0],b=0;else for(var d=b;d>=0;d--)if(void 0!==a[d]){c=a[d],b=d;break}return ja=b,ib||o(),j(c)}function h(a){if(ba[ia][ja].length>0&&da[ia][ja]<ba[ia][ja].length-1&&a!==!0&&ib===!1)k(ia,ja);else if(void 0===$[ia][ja+1]){if(Mb===!1)return!1;void 0!==$[ia+1]?(ia+=1,ja=0):void 0===$[ia+1]&&ob===!0&&(ia=0,ja=0)}else ja=Math.min(ja+1,$[ia].length-1);return j($[ia][ja])}function i(a){if(ba[ia][ja].length>0&&da[ia][ja]>=0&&a!==!0&&ib===!1)l(ia,ja);else if(0==ja){if(Mb===!1)return!1;void 0!=$[ia-1]?(ia-=1,ja=Sb===!0?0:$[ia].length-1):void 0==$[ia-1]&&ob===!0&&(ia=$.length-1,ja=Sb===!0?0:$[ia].length-1)}else ja=Math.max(ja-1,0);return j($[ia][ja])}function j(a){return 1==ib?void W(a):a}function k(a,b,c){void 0!=c?da[a][b]=c:c=da[a][b]+=1;for(var d=0;c>=d;d++)Brav1Toolbox.addClass(ba[a][b][d],Qa),Brav1Toolbox.removeClass(ba[a][b][d],Ra);Brav1Toolbox.addClass(ba[a][b][c],Ra)}function l(a,b,c){void 0!=c?da[a][b]=c:c=da[a][b];for(var d=0;d<ba[a][b].length;d++)d>=c&&(Brav1Toolbox.removeClass(ba[a][b][d],Qa),Brav1Toolbox.removeClass(ba[a][b][d],Sa)),Brav1Toolbox.removeClass(ba[a][b][d],Ra);c-=1,c>=0&&Brav1Toolbox.addClass(ba[a][b][c],Ra),da[a][b]=c}function m(){for(var a=0;a<aa.length;a++)Brav1Toolbox.addClass(aa[a],Sa)}function n(){for(var a=0;a<aa.length;a++)Brav1Toolbox.removeClass(aa[a],Sa)}function o(){for(var a=0;a<ba.length;a++)for(var b=ba[a],c=0;c<b.length;c++){var d=b[c];if(d.length>0)if(a>ia)for(var e=d.length-1;e>=0;e--)l(a,c,e);else if(ia>a)for(var e=0;e<d.length;e++)k(a,c,e);else if(a==ia)if(c>ja)for(var e=d.length-1;e>=0;e--)l(a,c,e);else if(ja>c)for(var e=0;e<d.length;e++)k(a,c,e);else if(c==ja){if(1==lb&&(db.section>bc.getPageIndex().section||db.page>bc.getPageIndex().page))for(var e=0;e<d.length;e++)k(a,c,e);else for(var e=d.length-1;e>=0;e--)l(a,c,e);da[a][c]=0==lb?-1:db.section>bc.getPageIndex().section||db.page>bc.getPageIndex().page?d.length-1:-1}}}function q(a){return ia}function r(a){return ja}function t(){return Z}function v(a){return $[a]}function w(){return _}function x(a){return $[a].length}function y(){return fa}function A(){return ga}function B(){return ha}function C(a){var b=ia,c=ja;return void 0!=a&&(b=a.parentNode.index,c=a.index),{section:b,page:c}}function D(a){return Z[a]}function E(a,b){return $[b][a]}function F(){return Z[ia]}function G(){return $[ia][ja]}function H(){var a=ia-1;if(0>a){if(ob!==!0)return null;a=$.length-1}return a}function I(){var a=H();return null===a?null:Z[a]}function J(){var a=ja-1;if(0>a){if(0===ia&&ob){var b=$.length-1;return $[b][$[b].length-1]}return ia>0?$[ia-1][$[ia-1].length-1]:null}return $[ia][a]}function K(){var a=ia+1;if(a>$.length-1){if(ob!==!0)return null;a=0}return a}function L(){var a=K();return null===a?null:Z[a]}function M(){var a=ja+1;return a>$[ia].length-1?ia===$.length-1&&ob?$[0][0]:ia<$.length-1?$[ia+1][0]:null:$[ia][a]}function N(){return ba[ia][ja][O()]}function O(){return da[ia][ja]}function P(){return ia<Z.length-1}function Q(){return ia>0}function R(){return ja<$[ia].length-1}function S(){return ja>0}function T(){if(0==ia&&0==ja)return 0;for(var a=0,b=0;ia>b;b++)a+=$[b].length;return a+=$[ia][ja].index+1}function U(a){a&&(ja=C(a).page,ia=C(a).section);var b="",c=Z[ia];if(b+=s(c),$[ia].length>0){var d=$[ia][ja];b+="/"+s(d)}return b}function V(a){var b=p(a);if(b){for(var c=b.parentNode,d=0;d<$.length;d++){var e=$[d];if(Z[d]===c){ia=d;for(var f=0;f<e.length;f++)if(e[f]===b){ja=f;break}}}o()}return b}function W(a,b){for(var c=a.parentNode.index,d=0;d<$.length;d++)for(var e=$[d],f=0;f<e.length;f++){var g=e[f];Brav1Toolbox.removeClass(g,"past-section"),Brav1Toolbox.removeClass(g,"future-section"),Brav1Toolbox.removeClass(g,"past-page"),Brav1Toolbox.removeClass(g,"future-page"),g!==a&&(Brav1Toolbox.removeClass(g,"hilite"),0==ib&&g!==G()&&Brav1Toolbox.removeClass(g,"actual"),c>d?Brav1Toolbox.addClass(g,"past-section"):d>c&&Brav1Toolbox.addClass(g,"future-section"),g.index<a.index?Brav1Toolbox.addClass(g,"past-page"):g.index>a.index&&Brav1Toolbox.addClass(g,"future-page"))}Brav1Toolbox.addClass(a,"hilite"),b&&Y(a),ca=a}function X(){return ca}function Y(a){Brav1Toolbox.addClass(a,"actual")}var Z,$,_,aa,ba,ca,da=[],ea=[],fa=0,ga=0,ha=0,ia=0,ja=0;return a(),{update:a,updateFragments:o,showFragments:m,hideFragments:n,getSection:q,getPage:r,getSections:t,getPages:v,getAllPages:w,getNextSection:e,getPrevSection:f,getNextPage:h,getPrevPage:i,getSectionLength:x,getSectionsLength:y,getPagesLength:A,getPagesTotalLength:B,getPageIndex:C,getSectionByIndex:D,getPageByIndex:E,getCurrentSection:F,getCurrentPage:G,getPrevSectionObject:I,getPrevPageObject:J,getNextSectionObject:L,getNextPageObject:M,getCurrentFragment:N,getCurrentFragmentIndex:O,getProgress:T,getHash:U,setPage:V,switchActivePage:W,getCurrentHilited:X,hasNextSection:P,hasPrevSection:Q,hasNextPage:R,hasPrevPage:S,updateOffsets:d,getParallaxElements:c}}();$b&&(Ha&&Brav1Toolbox.addListener(document,"touchend",function(b){a(b)},!1),Brav1Toolbox.addListener(document,"click",a,!1)),0==bb&&window.history.pushState?window.onpopstate=b:bb=!0,Brav1Toolbox.addListener(window,"hashchange",c);var cc=$a.offsetX,dc=0,ec=0,fc=0,gc=0,hc=0,ic=0,jc="x",kc=100;Ha&&($a.addEventListener("touchstart",e,!1),$a.addEventListener("touchmove",f,!1),$a.addEventListener("touchend",g,!1)),Brav1Toolbox.addListener(window,"scroll",j),addWheelListener($a,k);var gb=(function(){function a(){b(),ib||(d=setTimeout(c,300))}function b(){clearTimeout(d)}function c(){bc.updateOffsets(),v()}var d=0/0;return Brav1Toolbox.addListener(window,"resize",a),window.addEventListener("orientationchange",a,!1),{enable:a,disable:b}}(),null);Brav1Toolbox.addListener(window,"keydown",K),Brav1Toolbox.addListener(window,"keyup",L);var lc=!1,mc=0,nc=1e4,oc=!1,pc=0,qc=0;return{start:Q,updateNavigation:q,nextSection:T,prevSection:U,next:V,prev:W,nextFragment:V,prevFragment:W,gotoPage:X,gotoHome:Y,gotoTop:$,gotoBottom:_,gotoEnd:Z,toggleOverview:E,showOverview:F,fragmentsOnSide:ba,fragmentsOnBack:ca,useHistory:da,slideInPx:ea,useOverviewVariant:ia,twoStepsSlide:ja,showProgress:ka,defaultParallaxValues:la,parallaxInPx:ma,addEventListener:aa,getDefaultProgress:D,getSection:bc.getCurrentSection,getPage:bc.getCurrentPage,getSectionIndex:na,getPageIndex:oa,getPrevSection:bc.getPrevSectionObject,getNextSection:bc.getNextSectionObject,getPrevPage:bc.getPrevPageObject,getNextPage:bc.getNextPageObject,autoplay:M,play:N,pause:O,stop:P,loop:pa,clicker:qa,mouseDragEnabled:d,enableNavigation:ra,disableNavigation:sa,setLinksNavigation:ta,setKeyboardNavigation:ua,setScrollNavigation:va,setTouchNavigation:wa,setCrossDirection:xa,setDebouncingDelay:za,setTransitionTime:Aa,setMomentumScrollDelay:Ca,getTransitionTime:Ba,onNavigation:Da,gridNavigation:ha,backFromPageToTop:fa,nearestPageToTop:ga,rememberSectionsStatus:Ea,rememberSectionsLastPage:Fa,scrollTheSection:ya,toSectionsFromPages:Ga}}();